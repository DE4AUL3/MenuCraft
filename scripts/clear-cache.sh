#!/bin/bash

# –°–∫—Ä–∏–ø—Ç –¥–ª—è –æ—á–∏—Å—Ç–∫–∏ –∫–µ—à–∞ –∏ –ø—Ä–∏–Ω—É–¥–∏—Ç–µ–ª—å–Ω–æ–≥–æ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è —Å—Ç–∞—Ç–∏—á–µ—Å–∫–∏—Ö —Ñ–∞–π–ª–æ–≤

echo "üßπ –û—á–∏—Å—Ç–∫–∞ –∫–µ—à–∞ Next.js..."

# –û—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ–º —Å—É—â–µ—Å—Ç–≤—É—é—â–∏–µ –ø—Ä–æ—Ü–µ—Å—Å—ã
echo "–û—Å—Ç–∞–Ω–æ–≤–∫–∞ —Å—É—â–µ—Å—Ç–≤—É—é—â–∏—Ö –ø—Ä–æ—Ü–µ—Å—Å–æ–≤..."
pkill -f "next dev" || true
pkill -f "next start" || true

# –û—á–∏—â–∞–µ–º –∫–µ—à Next.js
echo "–û—á–∏—Å—Ç–∫–∞ .next –∫–µ—à–∞..."
rm -rf .next
rm -rf out

# –û—á–∏—â–∞–µ–º –∫–µ—à npm
echo "–û—á–∏—Å—Ç–∫–∞ npm –∫–µ—à–∞..."
npm cache clean --force

# –ü–µ—Ä–µ—É—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ–º –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)
# echo "–ü–µ—Ä–µ—É—Å—Ç–∞–Ω–æ–≤–∫–∞ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π..."
# rm -rf node_modules package-lock.json
# npm install

# –ü–µ—Ä–µ—Å–æ–±–∏—Ä–∞–µ–º –ø—Ä–æ–µ–∫—Ç
echo "–ü–µ—Ä–µ—Å–±–æ—Ä–∫–∞ –ø—Ä–æ–µ–∫—Ç–∞..."
npm run build

echo "‚úÖ –ö–µ—à –æ—á–∏—â–µ–Ω –∏ –ø—Ä–æ–µ–∫—Ç –ø–µ—Ä–µ—Å–æ–±—Ä–∞–Ω!"
echo ""
echo "üìã –î–ª—è –ø—Ä–æ–¥–∞–∫—à–Ω-–¥–µ–ø–ª–æ—è:"
echo "1. –ò–Ω–≤–∞–ª–∏–¥–∏—Ä—É–π—Ç–µ CDN –∫–µ—à (Cloudflare/Vercel/etc.)"
echo "2. –û—á–∏—Å—Ç–∏—Ç–µ –±—Ä–∞—É–∑–µ—Ä–Ω—ã–π –∫–µ—à: Ctrl+Shift+R"
echo "3. –ü–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏—Ç–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ: npm start"
echo ""
echo "üåê –î–ª—è —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è –ª–æ–∫–∞–ª—å–Ω–æ:"
echo "npm run dev"